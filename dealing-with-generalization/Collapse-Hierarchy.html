---
layout: dealing-with-generalization
head_en: Collapse Hierarchy
---
<p>
superclass 和subclass 之间无太大区别。
<p>
  <b>将它们合为一体。</b>

<p class="p-img"><img alt="" src="/refactoring-cheat-sheet/images/11fig10.gif"/></p>

<br>
<h3>动机（Motivation）</h3>
<p>
如果你曾经编写过继承体系，你就会知道，继承体系很容易变得过分复杂。所谓重构继承体系，往往是将函数和值域在体系中上下移动。完成这些动作后，你 很可能发现某个subclass 并未带来该有的价值，因此需要把classes 并合（折叠）起来。
</p>

<br>
<h3>作法（Mechanics）</h3>
<ul>
  <li>选择你想移除的class ：是superclass 还是subclass ？</li>
  <li>使用Pull Up Field 和 Pull Up Method，或者Push Down Method 和 Push Down Field，把想要移除的class 内的所有行为和数据 （值域）搬移到另一个class 。</li>
  <li>每次移动后，编译并测试。</li>
  <li>调整「即将被移除的那个class 」的所有引用点，令它们改而引用合并（折叠）后留下的class 。这个动作将会影响变量的声明、参数的型别以及构造函数。</li>
  <li>移除我们的目标；此时的它应该已经成为一个空类（empty class）。</li>
  <li>编译，测试。</li>
</ul>
